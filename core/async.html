<!DOCTYPE html>
<html lang="en" data-root="https://www.nuget.org/packages/SQLProvider/">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="pezipink,colinbull,thorium" name="author">
    <!-- Opengraph properties (https://ogp.me/) -->
    <meta property="og:site_name" content="SQLProvider">
    <meta property="og:title" content="Asynchronous Database Operation
" />
    <meta property="og:url" content="https://www.nuget.org/packages/SQLProvider/core/async.html">
    <meta property="og:type" content="website" />
    <!-- Twitter cards (https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="https://www.nuget.org/packages/SQLProvider/">
    <meta name="twitter:title" content="Asynchronous Database Operation
">
    
    <title>Asynchronous Database Operation
 | SQLProvider</title>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://www.nuget.org/packages/SQLProvider/img/favicon.ico" rel="icon" sizes="32x32" type="image/png"/>
    <script type="application/javascript" src="https://www.nuget.org/packages/SQLProvider/content/fsdocs-theme-set-dark.js"></script>
    <link href="https://www.nuget.org/packages/SQLProvider/content/fsdocs-default.css" rel="stylesheet" type="text/css"/>
    <link href="https://www.nuget.org/packages/SQLProvider/content/fsdocs-theme.css" rel="stylesheet" type="text/css"/>
    <link href="https://www.nuget.org/packages/SQLProvider/content/fsdocs-custom.css" rel="stylesheet" type="text/css"/>
    
    
</head>
<body class="content">
<header>
    <div class="start">
        <div id="menu-toggle">
            <iconify-icon class="icon closed" height="22" icon="eva:menu-fill" width="22"></iconify-icon>
            <iconify-icon class="icon open" height="22" icon="mi:close" width="22"></iconify-icon>
            <input type="checkbox" name="mobile-menu" />
            <ul class="menu">
                <li class="nav-header">Links</li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/fsprojects/SQLProvider/blob/master/LICENSE.txt">License</a>
                </li>
                <li class="nav-item"><a class="nav-link"
                                        href="https://github.com/fsprojects/SQLProvider/blob/master/docs/RELEASE_NOTES.md">Release
                    Notes</a></li>
                <li class="nav-item"><a class="nav-link" href="https://github.com/fsprojects/SQLProvider.git/">Source
                    Repository</a></li>
                <li class="nav-header">
  Documentation
</li>             
<li class="nav-item active">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/async.html">
    Asynchronous Database Operation

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/composable.html">
    Composable Queries

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/constraints-relationships.html">
    Constraints &amp;amp; Relationships

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/contributing.html">
    How to contribute

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/crud.html">
    CRUD sample

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/general.html">
    general
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/individuals.html">
    Individuals

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/mappers.html">
    mappers
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/msaccess.html">
    SQL Provider for MSAccess

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/mssql.html">
    MSSQL Provider

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/mssqlssdt.html">
    MSSQL SSDT Provider

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/mysql.html">
    MySQL Provider

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/netstandard.html">
    .NET Standard / .NET Core support

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/odbc.html">
    ODBC

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/oracle.html">
    SQL Provider for Oracle

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/outline.html">
    SQL Type Provider

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/parameters.html">
    SQL Provider Static Parameters

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/postgresql.html">
    PostgreSQL Provider

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/programmability.html">
    Programmability

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/querying.html">
    Querying

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/sqlite.html">
    SQLite Provider

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/techdetails.html">
    techdetails
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/core/unittest.html">
    SQLProvider allows you to unit-test your SQL-logic

  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
        <a href="https://www.nuget.org/packages/SQLProvider/">
            <!-- <img alt="Header menu logo" src="https://www.nuget.org/packages/SQLProvider/img/logo.png"> -->
            <H1 style="font-size: 24px;">SQLProvider</H1>
        </a>
    </div>
    <div class="end">
        <a href="https://github.com/fsprojects/SQLProvider.git/" target="_blank">
            <iconify-icon icon="uil:github" width="26" height="26"></iconify-icon>
        </a>
        <iconify-icon id="search-btn" icon="carbon:search" class="search" width="24" height="24"></iconify-icon>
        <fsdocs-theme-toggle></fsdocs-theme-toggle>
    </div>
</header>
<aside id="fsdocs-main-menu">
    <ul class="menu">
        <li class="nav-header">Documentation</li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/general.html" class="nav-link">General</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/parameters.html" class="nav-link">Static Parameters</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/querying.html" class="nav-link">Querying</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/constraints-relationships.html" class="nav-link">Constraints & Relationships</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/crud.html" class="nav-link">CRUD</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/programmability.html" class="nav-link">Programmability</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/individuals.html" class="nav-link">Individuals</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/composable.html" class="nav-link">Composable Query</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/mssql.html" class="nav-link">SQL Server</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/oracle.html" class="nav-link">Oracle</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/sqlite.html" class="nav-link">SQLite</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/postgresql.html" class="nav-link">PostgreSQL</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/mysql.html" class="nav-link">MySQL</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/odbc.html" class="nav-link">ODBC</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//core/unittest.html" class="nav-link">Unit-testing</a></li>
        <li class="nav-item"><a href="https://www.nuget.org/packages/SQLProvider//reference/index.html" class="nav-link">Internal API Docs</a></li>

        <li class="nav-item"><a class="nav-link" href="https://github.com/fsprojects/SQLProvider/blob/master/LICENSE.txt">License</a>
        </li>
        <li class="nav-item"><a class="nav-link"
                                href="https://github.com/fsprojects/SQLProvider/blob/master/docs/RELEASE_NOTES.md">Release
            Notes</a></li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/fsprojects/SQLProvider.git/">Source
            Repository</a></li>
        
        <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://www.nuget.org/packages/SQLProvider/reference/index.html">
    All Namespaces
  </a>
</li>
    </ul>
</aside>
<main>
    <div id="content">
        <h1><a name="Asynchronous-Database-Operation" class="anchor" href="#Asynchronous-Database-Operation">Asynchronous Database Operation</a></h1>
<p>You get more performance by concurrency. The idea of async database operations
is to release the business logics thread while the database is doing its job.
This can lead to a huge performance difference in a heavy traffic environment
(basically, will your business logics server / web-server crash or not).</p>
<p><img src="https://i.imgur.com/DBPLRlP.png" alt="" /></p>
<p>In the picture, we talk about the red block, which can be released to serve other customers.
As usual with async operations, there will be more thread context switching,
which may cause minor performance delays, but concurrency benefits should outweigh the
cons of context switching.</p>
<p>This is the theory. In practice, SQLProvider is calling the implementation of async methods from
abstract classes under System.Data.Common. The implementation quality of your database
connection .NET drivers will determine whether or not async is good for you. (E.g. The current
situation is that MS-SQL-server handles async well, and MySQL does not so.)</p>
<p>Currently, SQLProvider supports async operations on runtime, not design-time.</p>
<p>Your execution thread may change. For transactions to support this,
.NET 4.5.1 has a fix for asynchronous transactions that must be explicitly used.</p>
<h3><a name="Async-queries-and-updates" class="anchor" href="#Async-queries-and-updates">Async queries and updates</a></h3>
<p>The concept for async queries is this:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs10', 16)" onmouseover="showTip(event, 'fs10', 16)" class="id">System</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs10', 17)" onmouseover="showTip(event, 'fs10', 17)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs11', 18)" onmouseover="showTip(event, 'fs11', 18)" class="id">Threading</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="id">Tasks</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs5', 20)" onmouseover="showTip(event, 'fs5', 20)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 21)" onmouseover="showTip(event, 'fs6', 21)" class="id">Data</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 22)" onmouseover="showTip(event, 'fs7', 22)" class="id">Sql</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs13', 23)" onmouseover="showTip(event, 'fs13', 23)" class="rt">MyWebServer</span><span class="pn">(</span><span class="pn">)</span> <span class="o">=</span>
    <span class="k">member</span> <span class="id">__</span><span class="pn">.</span><span class="fn">``Execute Business Logics``</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs14', 24)" onmouseover="showTip(event, 'fs14', 24)" class="fn">id</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs15', 25)" onmouseover="showTip(event, 'fs15', 25)" class="vt">Guid</span><span class="pn">)</span> <span class="pn">:</span> <span onmouseout="hideTip(event, 'fs16', 26)" onmouseover="showTip(event, 'fs16', 26)" class="d">Task</span><span class="pn">&lt;</span><span class="id">_</span><span class="pn">&gt;</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs17', 27)" onmouseover="showTip(event, 'fs17', 27)" class="k">task</span> <span class="pn">{</span>
            <span class="k">use</span> <span onmouseout="hideTip(event, 'fs18', 28)" onmouseover="showTip(event, 'fs18', 28)" class="d">transaction</span> <span class="o">=</span>
                <span class="k">new</span> <span onmouseout="hideTip(event, 'fs10', 29)" onmouseover="showTip(event, 'fs10', 29)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 30)" onmouseover="showTip(event, 'fs19', 30)" class="id">Transactions</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 31)" onmouseover="showTip(event, 'fs20', 31)" class="id">TransactionScope</span><span class="pn">(</span>
                <span class="c">// .NET 4.5.1 fix for asynchronous transactions:</span>
                    <span onmouseout="hideTip(event, 'fs10', 32)" onmouseover="showTip(event, 'fs10', 32)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 33)" onmouseover="showTip(event, 'fs19', 33)" class="id">Transactions</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 34)" onmouseover="showTip(event, 'fs21', 34)" class="en">TransactionScopeAsyncFlowOption</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs22', 35)" onmouseover="showTip(event, 'fs22', 35)" class="id">Enabled</span>
                <span class="pn">)</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs23', 36)" onmouseover="showTip(event, 'fs23', 36)" class="fn">context</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 37)" onmouseover="showTip(event, 'fs8', 37)" class="id">TypeProviderConnection</span><span class="pn">.</span><span class="id">GetDataContext</span> <span onmouseout="hideTip(event, 'fs4', 38)" onmouseover="showTip(event, 'fs4', 38)" class="id">cstr</span>
            <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs24', 39)" onmouseover="showTip(event, 'fs24', 39)" class="fn">fetched</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs25', 40)" onmouseover="showTip(event, 'fs25', 40)" class="k">query</span> <span class="pn">{</span>
                    <span class="k">for</span>  <span onmouseout="hideTip(event, 'fs26', 41)" onmouseover="showTip(event, 'fs26', 41)" class="fn">t2</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs23', 42)" onmouseover="showTip(event, 'fs23', 42)" class="fn">context</span><span class="pn">.</span><span class="id">MyDataBase</span><span class="pn">.</span><span class="id">MyTable2</span> <span class="k">do</span>
                    <span onmouseout="hideTip(event, 'fs27', 43)" onmouseover="showTip(event, 'fs27', 43)" class="k">join</span> <span onmouseout="hideTip(event, 'fs28', 44)" onmouseover="showTip(event, 'fs28', 44)" class="fn">t1</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs23', 45)" onmouseover="showTip(event, 'fs23', 45)" class="fn">context</span><span class="pn">.</span><span class="id">MyDataBase</span><span class="pn">.</span><span class="id">MyTable1</span> <span class="k">on</span> <span class="pn">(</span><span class="fn">t2</span><span class="pn">.</span><span class="id">ForeignId</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs28', 46)" onmouseover="showTip(event, 'fs28', 46)" class="fn">t1</span><span class="pn">.</span><span class="id">Id</span><span class="pn">)</span>
                    <span onmouseout="hideTip(event, 'fs29', 47)" onmouseover="showTip(event, 'fs29', 47)" class="k">where</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs26', 48)" onmouseover="showTip(event, 'fs26', 48)" class="fn">t2</span><span class="pn">.</span><span class="id">Id</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 49)" onmouseover="showTip(event, 'fs14', 49)" class="fn">id</span><span class="pn">)</span>
                    <span onmouseout="hideTip(event, 'fs30', 50)" onmouseover="showTip(event, 'fs30', 50)" class="k">select</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs28', 51)" onmouseover="showTip(event, 'fs28', 51)" class="fn">t1</span><span class="pn">)</span>
                <span class="pn">}</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs31', 52)" onmouseover="showTip(event, 'fs31', 52)" class="m">Seq</span><span class="pn">.</span><span class="id">executeQueryAsync</span>

            <span class="fn">fetched</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs31', 53)" onmouseover="showTip(event, 'fs31', 53)" class="m">Seq</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 54)" onmouseover="showTip(event, 'fs32', 54)" class="id">iter</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs33', 55)" onmouseover="showTip(event, 'fs33', 55)" class="fn">entity</span> <span class="k">-&gt;</span>
                <span onmouseout="hideTip(event, 'fs33', 56)" onmouseover="showTip(event, 'fs33', 56)" class="fn">entity</span><span class="pn">.</span><span class="id">SetColumn</span><span class="pn">(</span><span class="s">&quot;Updated&quot;</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs34', 57)" onmouseover="showTip(event, 'fs34', 57)" class="id">DateTime</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 58)" onmouseover="showTip(event, 'fs35', 58)" class="id">UtcNow</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs36', 59)" onmouseover="showTip(event, 'fs36', 59)" class="id">box</span><span class="pn">)</span>
            <span class="pn">)</span>
            <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs23', 60)" onmouseover="showTip(event, 'fs23', 60)" class="fn">context</span><span class="pn">.</span><span class="id">SubmitUpdatesAsync</span><span class="pn">(</span><span class="pn">)</span>

            <span onmouseout="hideTip(event, 'fs18', 61)" onmouseover="showTip(event, 'fs18', 61)" class="d">transaction</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs37', 62)" onmouseover="showTip(event, 'fs37', 62)" class="id">Complete</span><span class="pn">(</span><span class="pn">)</span>
            <span class="k">return</span> <span class="s">&quot;done!&quot;</span>
        <span class="pn">}</span> 
</code></pre>
<p>The functions to work with asynchrony are:</p>
<ul>
<li>Array.executeQueryAsync : IQueryable<'a> -&gt; Async<<'a> []&gt;</li>
<li>List.executeQueryAsync : IQueryable<'a> -&gt; Async<'a list></li>
<li>Seq.executeQueryAsync : IQueryable<'a> -&gt; Async<seq<'a>&gt;</li>
<li>Seq.lengthAsync : IQueryable<'a> -&gt; Async<int></li>
<li>Seq.headAsync : IQueryable<'a> -&gt; Async<'a></li>
<li>Seq.tryHeadAsync : IQueryable<'a> -&gt; Async<'a option></li>
<li>and for your data context: SubmitUpdatesAsync : unit -&gt; Async<Unit></li>
<li>Seq.sumAsync : IQueryable<'a when 'a : comparison> -&gt; Async<'a></li>
<li>Seq.minAsync : IQueryable<'a when 'a : comparison> -&gt; Async<'a></li>
<li>Seq.maxAsync : IQueryable<'a when 'a : comparison> -&gt; Async<'a></li>
<li>Seq.averageAsync : IQueryable<'a when 'a : comparison> -&gt; Async<'a></li>
<li>Seq.stdDevAsync : IQueryable<'a when 'a : comparison> -&gt; Async<'a></li>
<li>Seq.varianceAsync : IQueryable<'a when 'a : comparison> -&gt; Async<'a></li>
</ul>
<p>Seq is .NET IEnumerable, which is lazy. So be careful if using Seq.executeQueryAsync
to not execute your queries several times.</p>
<p>Also, stored procedures do support InvokeAsync.</p>
<h4><a name="Database-asynchrony-can-t-be-used-as-a-way-to-do-parallelism-inside-one-context" class="anchor" href="#Database-asynchrony-can-t-be-used-as-a-way-to-do-parallelism-inside-one-context">Database asynchrony can't be used as a way to do parallelism inside one context.</a></h4>
<p>Usually, database operations can't be executed in parallel inside one context/transaction.
That is an anti-pattern in general: the network lag between the database and your logics server
is probably the bottleneck of your system. So, in this order:</p>
<ol>
<li>Try to execute your business logics as database queries, as one big query.</li>
<li>Or sometimes, not often, load eagerly data with a single query and process it in the logics server.</li>
<li>Avoid cases in which you create as many queries as your collection has items.</li>
</ol>
<p>So if you are still in the worst case, 3, and have to deal with a List<Async<T>&gt;, you cannot
say Async.Parallel as that may corrupt your data. To avoid custom imperative while-loops,
we have provided a little helper function for you, that is List.evaluateOneByOne.</p>
<p>Avoid network traffic between business logics (BL) and database (DB).
When you exit the query-computation, you cause the traffic.</p>
<h3><a name="Why-Not-to-Use-Async" class="anchor" href="#Why-Not-to-Use-Async">Why Not to Use Async</a></h3>
<p>As with all the technical choices, there are drawbacks to consider.</p>
<ul>
<li>Your codebase will be more complex. This will slow down your development speed if your developers are not F#-professionals.</li>
<li>You must use other technologies supporting async or .NET tasks, like WCF or SignalR. There is no point in doing async and then still using <code>RunSynchronously</code> at the end.</li>
<li>You may consider async as premature optimization. Starting without async and converting all later is an option, although your APIs must change.</li>
<li>Async and transactions are a problem with the Mono environment.</li>
<li>Async will make your error stacktraces harder to read: You may be used to search your functions from the stacktrace to spot any problems. With async, you don't have your own code in the error-stack. At the time of e.g. SQL-exception, there is no thread waiting, your code is not actively running, there is no stack.</li>
</ul>

        <div class="fsdocs-tip" id="fs1">Multiple items<br />type LiteralAttribute =
  inherit Attribute
  new: unit -&gt; LiteralAttribute<br /><br />--------------------<br />new: unit -&gt; LiteralAttribute</div>
<div class="fsdocs-tip" id="fs2">[&lt;Literal&gt;]
val resolutionPath: string = &quot;C:\git\SQLProvider\docs\content\core/../../files/sqlite&quot;</div>
<div class="fsdocs-tip" id="fs3">[&lt;Literal&gt;]
val connectionString: string = &quot;Data Source=C:\git\SQLProvider\docs\content\core\..\northwindEF.db;Version=3;Read Only=false;FailIfMissing=True;&quot;</div>
<div class="fsdocs-tip" id="fs4">val cstr: string</div>
<div class="fsdocs-tip" id="fs5">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs6">Multiple items<br />namespace FSharp.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="fsdocs-tip" id="fs7">namespace FSharp.Data.Sql</div>
<div class="fsdocs-tip" id="fs8">type TypeProviderConnection = obj</div>
<div class="fsdocs-tip" id="fs9">type SqlDataProvider<br /><em>&lt;summary&gt;Typed representation of a database&lt;/summary&gt;
                    &lt;param name=&#39;ConnectionString&#39;&gt;The connection string for the SQL database&lt;/param&gt;
                    &lt;param name=&#39;ConnectionStringName&#39;&gt;The connection string name to select from a configuration file&lt;/param&gt;
                    &lt;param name=&#39;DatabaseVendor&#39;&gt; The target database vendor&lt;/param&gt;
                    &lt;param name=&#39;IndividualsAmount&#39;&gt;The amount of sample entities to project into the type system for each SQL entity type. Default 50. Note GDPR/PII regulations if using individuals with ContextSchemaPath.&lt;/param&gt;
                    &lt;param name=&#39;UseOptionTypes&#39;&gt;If set, F# option types will be used in place of nullable database columns.  If not, you will always receive the default value of the column&#39;s type even if it is null in the database.&lt;/param&gt;
                    &lt;param name=&#39;ResolutionPath&#39;&gt;The location to look for dynamically loaded assemblies containing database vendor specific connections and custom types. Types used in desing-time: If no better clue, prefer .NET Standard 2.0 versions. Semicolon to separate multiple.&lt;/param&gt;
                    &lt;param name=&#39;Owner&#39;&gt;Oracle: The owner of the schema for this provider to resolve. PostgreSQL: A list of schemas to resolve, separated by spaces, newlines, commas, or semicolons.&lt;/param&gt;
                    &lt;param name=&#39;CaseSensitivityChange&#39;&gt;Should we do ToUpper or ToLower when generating table names?&lt;/param&gt;
                    &lt;param name=&#39;TableNames&#39;&gt;Comma separated table names list to limit a number of tables in big instances. The names can have &#39;%&#39; sign to handle it as in the &#39;LIKE&#39; query (Oracle and MSSQL Only)&lt;/param&gt;
                    &lt;param name=&#39;ContextSchemaPath&#39;&gt;The location of the context schema previously saved with SaveContextSchema. When not empty, will be used to populate the database schema instead of retrieving it from then database.&lt;/param&gt;
                    &lt;param name=&#39;OdbcQuote&#39;&gt;Odbc quote characters: Quote characters for the table and column names: `alias`, [alias]&lt;/param&gt;
                    &lt;param name=&#39;SQLiteLibrary&#39;&gt;Use System.Data.SQLite or Mono.Data.SQLite or select automatically (SQLite only)&lt;/param&gt;
                    &lt;param name=&#39;SsdtPath&#39;&gt;A path to an SSDT .dacpac file.&#39;&lt;/param&gt;
                    </em></div>
<div class="fsdocs-tip" id="fs10">namespace System</div>
<div class="fsdocs-tip" id="fs11">namespace System.Threading</div>
<div class="fsdocs-tip" id="fs12">namespace System.Threading.Tasks</div>
<div class="fsdocs-tip" id="fs13">Multiple items<br />type MyWebServer =
  new: unit -&gt; MyWebServer
  member ``Execute Business Logics`` : id: Guid -&gt; Task&lt;string&gt;<br /><br />--------------------<br />new: unit -&gt; MyWebServer</div>
<div class="fsdocs-tip" id="fs14">val id: Guid</div>
<div class="fsdocs-tip" id="fs15">Multiple items<br />[&lt;Struct&gt;]
type Guid =
  new: b: byte array -&gt; unit + 6 overloads
  member CompareTo: value: Guid -&gt; int + 1 overload
  member Equals: g: Guid -&gt; bool + 1 overload
  member GetHashCode: unit -&gt; int
  member ToByteArray: unit -&gt; byte array + 1 overload
  member ToString: unit -&gt; string + 2 overloads
  member TryFormat: utf8Destination: Span&lt;byte&gt; * bytesWritten: byref&lt;int&gt; * ?format: ReadOnlySpan&lt;char&gt; -&gt; bool + 1 overload
  member TryWriteBytes: destination: Span&lt;byte&gt; -&gt; bool + 1 overload
  static member (&lt;) : left: Guid * right: Guid -&gt; bool
  static member (&lt;=) : left: Guid * right: Guid -&gt; bool
  ...<br /><em>&lt;summary&gt;Represents a globally unique identifier (GUID).&lt;/summary&gt;</em><br /><br />--------------------<br />Guid ()<br />Guid(b: byte array) : Guid<br />Guid(b: ReadOnlySpan&lt;byte&gt;) : Guid<br />Guid(g: string) : Guid<br />Guid(b: ReadOnlySpan&lt;byte&gt;, bigEndian: bool) : Guid<br />Guid(a: int, b: int16, c: int16, d: byte array) : Guid<br />Guid(a: int, b: int16, c: int16, d: byte, e: byte, f: byte, g: byte, h: byte, i: byte, j: byte, k: byte) : Guid<br />Guid(a: uint32, b: uint16, c: uint16, d: byte, e: byte, f: byte, g: byte, h: byte, i: byte, j: byte, k: byte) : Guid</div>
<div class="fsdocs-tip" id="fs16">Multiple items<br />type Task =
  interface IAsyncResult
  interface IDisposable
  new: action: Action -&gt; unit + 7 overloads
  member ConfigureAwait: continueOnCapturedContext: bool -&gt; ConfiguredTaskAwaitable + 1 overload
  member ContinueWith: continuationAction: Action&lt;Task,obj&gt; * state: obj -&gt; Task + 19 overloads
  member Dispose: unit -&gt; unit
  member GetAwaiter: unit -&gt; TaskAwaiter
  member RunSynchronously: unit -&gt; unit + 1 overload
  member Start: unit -&gt; unit + 1 overload
  member Wait: unit -&gt; unit + 5 overloads
  ...<br /><em>&lt;summary&gt;Represents an asynchronous operation.&lt;/summary&gt;</em><br /><br />--------------------<br />type Task&lt;&#39;TResult&gt; =
  inherit Task
  new: ``function`` : Func&lt;obj,&#39;TResult&gt; * state: obj -&gt; unit + 7 overloads
  member ConfigureAwait: continueOnCapturedContext: bool -&gt; ConfiguredTaskAwaitable&lt;&#39;TResult&gt; + 1 overload
  member ContinueWith: continuationAction: Action&lt;Task&lt;&#39;TResult&gt;,obj&gt; * state: obj -&gt; Task + 19 overloads
  member GetAwaiter: unit -&gt; TaskAwaiter&lt;&#39;TResult&gt;
  member WaitAsync: cancellationToken: CancellationToken -&gt; Task&lt;&#39;TResult&gt; + 4 overloads
  member Result: &#39;TResult
  static member Factory: TaskFactory&lt;&#39;TResult&gt;<br /><em>&lt;summary&gt;Represents an asynchronous operation that can return a value.&lt;/summary&gt;<br />&lt;typeparam name=&quot;TResult&quot;&gt;The type of the result produced by this &lt;see cref=&quot;T:System.Threading.Tasks.Task`1&quot; /&gt;.&lt;/typeparam&gt;</em><br /><br />--------------------<br />Task(action: Action) : Task<br />Task(action: Action, cancellationToken: Threading.CancellationToken) : Task<br />Task(action: Action, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj) : Task<br />Task(action: Action, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, cancellationToken: Threading.CancellationToken) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, creationOptions: TaskCreationOptions) : Task<br />Task(action: Action&lt;obj&gt;, state: obj, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : Task<br /><br />--------------------<br />Task(``function`` : Func&lt;&#39;TResult&gt;) : Task&lt;&#39;TResult&gt;<br />Task(``function`` : Func&lt;obj,&#39;TResult&gt;, state: obj) : Task&lt;&#39;TResult&gt;<br />Task(``function`` : Func&lt;&#39;TResult&gt;, cancellationToken: Threading.CancellationToken) : Task&lt;&#39;TResult&gt;<br />Task(``function`` : Func&lt;&#39;TResult&gt;, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(``function`` : Func&lt;obj,&#39;TResult&gt;, state: obj, cancellationToken: Threading.CancellationToken) : Task&lt;&#39;TResult&gt;<br />Task(``function`` : Func&lt;obj,&#39;TResult&gt;, state: obj, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(``function`` : Func&lt;&#39;TResult&gt;, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;<br />Task(``function`` : Func&lt;obj,&#39;TResult&gt;, state: obj, cancellationToken: Threading.CancellationToken, creationOptions: TaskCreationOptions) : Task&lt;&#39;TResult&gt;</div>
<div class="fsdocs-tip" id="fs17">val task: TaskBuilder</div>
<div class="fsdocs-tip" id="fs18">val transaction: Transactions.TransactionScope</div>
<div class="fsdocs-tip" id="fs19">namespace System.Transactions</div>
<div class="fsdocs-tip" id="fs20">Multiple items<br />type TransactionScope =
  interface IDisposable
  new: unit -&gt; unit + 13 overloads
  member Complete: unit -&gt; unit
  member Dispose: unit -&gt; unit<br /><em>&lt;summary&gt;Makes a code block transactional. This class cannot be inherited.&lt;/summary&gt;</em><br /><br />--------------------<br />Transactions.TransactionScope() : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(transactionToUse: Transactions.Transaction) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(asyncFlowOption: Transactions.TransactionScopeAsyncFlowOption) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(scopeOption: Transactions.TransactionScopeOption) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(transactionToUse: Transactions.Transaction, scopeTimeout: TimeSpan) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(transactionToUse: Transactions.Transaction, asyncFlowOption: Transactions.TransactionScopeAsyncFlowOption) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(scopeOption: Transactions.TransactionScopeOption, scopeTimeout: TimeSpan) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(scopeOption: Transactions.TransactionScopeOption, transactionOptions: Transactions.TransactionOptions) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(scopeOption: Transactions.TransactionScopeOption, asyncFlowOption: Transactions.TransactionScopeAsyncFlowOption) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />Transactions.TransactionScope(transactionToUse: Transactions.Transaction, scopeTimeout: TimeSpan, interopOption: Transactions.EnterpriseServicesInteropOption) : Transactions.TransactionScope<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="fsdocs-tip" id="fs21">[&lt;Struct&gt;]
type TransactionScopeAsyncFlowOption =
  | Suppress = 0
  | Enabled = 1<br /><em>&lt;summary&gt;Specifies whether transaction flow across thread continuations is enabled for &lt;see cref=&quot;T:System.Transactions.TransactionScope&quot; /&gt;.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs22">field Transactions.TransactionScopeAsyncFlowOption.Enabled: Transactions.TransactionScopeAsyncFlowOption = 1<br /><em>&lt;summary&gt;Specifies that transaction flow across thread continuations is enabled.&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs23">val context: obj</div>
<div class="fsdocs-tip" id="fs24">val fetched: obj seq</div>
<div class="fsdocs-tip" id="fs25">val query: Linq.QueryBuilder</div>
<div class="fsdocs-tip" id="fs26">val t2: obj</div>
<div class="fsdocs-tip" id="fs27">custom operation: join var in collection on (outerKey = innerKey). Note that parentheses are required after &#39;on&#39;

Calls Linq.QueryBuilder.Join</div>
<div class="fsdocs-tip" id="fs28">val t1: obj</div>
<div class="fsdocs-tip" id="fs29">custom operation: where (bool)

Calls Linq.QueryBuilder.Where</div>
<div class="fsdocs-tip" id="fs30">custom operation: select (&#39;Result)

Calls Linq.QueryBuilder.Select</div>
<div class="fsdocs-tip" id="fs31">module Seq

from Microsoft.FSharp.Collections</div>
<div class="fsdocs-tip" id="fs32">val iter: action: (&#39;T -&gt; unit) -&gt; source: &#39;T seq -&gt; unit</div>
<div class="fsdocs-tip" id="fs33">val entity: obj</div>
<div class="fsdocs-tip" id="fs34">Multiple items<br />[&lt;Struct&gt;]
type DateTime =
  new: date: DateOnly * time: TimeOnly -&gt; unit + 16 overloads
  member Add: value: TimeSpan -&gt; DateTime
  member AddDays: value: float -&gt; DateTime
  member AddHours: value: float -&gt; DateTime
  member AddMicroseconds: value: float -&gt; DateTime
  member AddMilliseconds: value: float -&gt; DateTime
  member AddMinutes: value: float -&gt; DateTime
  member AddMonths: months: int -&gt; DateTime
  member AddSeconds: value: float -&gt; DateTime
  member AddTicks: value: int64 -&gt; DateTime
  ...<br /><em>&lt;summary&gt;Represents an instant in time, typically expressed as a date and time of day.&lt;/summary&gt;</em><br /><br />--------------------<br />DateTime ()<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(date: DateOnly, time: TimeOnly) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(ticks: int64, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(date: DateOnly, time: TimeOnly, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, calendar: Globalization.Calendar) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, kind: DateTimeKind) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em><br />DateTime(year: int, month: int, day: int, hour: int, minute: int, second: int, calendar: Globalization.Calendar) : DateTime<br />&#160;&#160;&#160;<em>(+0 other overloads)</em></div>
<div class="fsdocs-tip" id="fs35">property DateTime.UtcNow: DateTime with get<br /><em>&lt;summary&gt;Gets a &lt;see cref=&quot;T:System.DateTime&quot; /&gt; object that is set to the current date and time on this computer, expressed as the Coordinated Universal Time (UTC).&lt;/summary&gt;<br />&lt;returns&gt;An object whose value is the current UTC date and time.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs36">val box: value: &#39;T -&gt; obj</div>
<div class="fsdocs-tip" id="fs37">Transactions.TransactionScope.Complete() : unit</div>

    </div>
</main>
<aside id="fsdocs-page-menu">
    <p id="on-this-page">On this page</p>
    <ul>
  <li class="level-1">
    <a href="#Asynchronous-Database-Operation">
      Asynchronous Database Operation
    </a>
  </li>
  <li class="level-3">
    <a href="#Async-queries-and-updates">
      Async queries and updates
    </a>
  </li>
  <li class="level-4">
    <a href="#Database-asynchrony-can-t-be-used-as-a-way-to-do-parallelism-inside-one-context">
      Database asynchrony can't be used as a way to do parallelism inside one context.
    </a>
  </li>
  <li class="level-3">
    <a href="#Why-Not-to-Use-Async">
      Why Not to Use Async
    </a>
  </li>
</ul>
</aside>
<dialog>
    <input type="search" placeholder="Search docs" />
    <div class="results">
        <ul></ul>
        <p class="empty">Type something to start searching.</p>
    </div>
</dialog>
<script type="module" src="https://www.nuget.org/packages/SQLProvider/content/fsdocs-tips.js"></script>
<script type="module" src="https://www.nuget.org/packages/SQLProvider/content/fsdocs-theme-toggle.js"></script>
<script type="module" src="https://www.nuget.org/packages/SQLProvider/content/fsdocs-theme.js"></script>
<script type="module" src="https://www.nuget.org/packages/SQLProvider/content/fsdocs-search.js"></script>

</body>
</html>